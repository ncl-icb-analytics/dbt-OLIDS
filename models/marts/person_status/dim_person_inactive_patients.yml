version: 2
models:
- name: dim_person_inactive_patients
  description: Dimension table providing inactive patient status at person level. Includes only deceased patients and patients from closed/obsolete practices. Excludes dummy patients.
  columns:
  - name: person_id
    description: Unique person identifier - primary key

    tests:
    - not_null
    - unique
  - name: sk_patient_id
    description: Surrogate patient key

    tests:
    - not_null
  - name: is_deceased
    description: Boolean flag indicating if patient is deceased

    tests:
    - not_null
    - accepted_values:

        values:
        - true
        - false
  - name: is_dummy_patient
    description: Boolean flag indicating if this is a dummy/test patient

    tests:
    - not_null
    - accepted_values:

        values:
        - true
        - false
  - name: inactive_reason
    description: Reason for inactive status (Deceased, No Current Registration, Dummy Patient)

    tests:
    - not_null
