version: 2

models:
  - name: fct_flu_eligibility
    description: 'Flu Vaccination Eligibility Fact Table - Who SHOULD be vaccinated

      This model determines eligibility for flu vaccination using clear, individual rule models.

      Business Logic:

      • Consolidates all flu vaccination eligibility rules using campaign-agnostic approach

      • Age-based rules (65+, preschool, school age), clinical conditions, and special populations

      • Works with any campaign year via flu_current_campaign variable in dbt_project.yml

      • One row per person per eligible rule group with priority-based classification'
  - name: fct_flu_status
    description: 'Flu Vaccination Status Fact Table - Who HAS BEEN vaccinated

      This model tracks vaccination outcomes and status using clear tracking models.

      Business Logic:

      • Tracks vaccination administration, declination, and LAIV records

      • Separate from eligibility - focuses on actual vaccination outcomes

      • Works with any campaign year via flu_current_campaign variable

      • One row per person per vaccination status type with outcome tracking'
  - name: fct_flu_eligibility_comparison
    description: 'Multi-campaign comparison view for year-over-year analysis

      Uses the campaign-agnostic fct_flu_eligibility model for consistent comparisons.

      Business Logic:

      • Enables comparison between campaigns using standardised approach

      • Summary statistics by campaign, rule group, and age demographics

      • Simple view-based approach rather than complex unions'
  - name: fct_flu_uptake
    description: 'Flu Vaccination Uptake Fact Table (Row-Level)

      Combines eligibility and vaccination status at person level for comprehensive uptake analysis.

      Business Logic:

      • Joins eligibility data with vaccination status to show complete uptake picture

      • Includes practice and demographic information for segmentation

      • Identifies coverage gaps and vaccination patterns

      • Works automatically with both current and previous campaigns'
  - name: fct_flu_uptake_by_practice
    description: 'Flu Vaccination Uptake by Practice (Aggregated)

      Aggregates flu vaccination uptake at practice level for performance monitoring.

      Business Logic:

      • Calculates uptake rates, coverage gaps, and demographic breakdowns by practice

      • Includes time-to-vaccination metrics and performance indicators

      • Enables comparison across PCNs, boroughs, and campaigns

      • Identifies practices needing targeted interventions'
