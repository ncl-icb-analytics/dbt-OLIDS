version: 2
models:
  - name: dim_valproate_araf
    description: 'Person-level aggregation of Annual Risk Acknowledgement Form (ARAF) events for valproate monitoring.


      Business Logic:

      • Aggregates all ARAF events per person from intermediate ARAF events table

      • Provides earliest and latest ARAF event dates for timeline analysis

      • Tracks latest specific ARAF form date and lookback compliance flag

      • Includes arrays of all observation IDs, concept codes, and displays for traceability

      • Only includes people who have ARAF events (has_araf_event always TRUE)

      • Includes flags for old and new annual risk acknowledgement form types

      • Provides form type information with dates for traceability'
