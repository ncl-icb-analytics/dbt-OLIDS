version: 2
models:
- name: fct_person_ltc_summary
  description: 'Comprehensive summary of all long-term condition (LTC) registers for analytical
    and reporting purposes. Unions all QOF disease registers into a single fact table
    for cross-condition analysis.

    **Key Features:**
    - One row per person per condition they''re registered for
    - Standardised condition codes and names
    - Earliest and latest diagnosis dates per condition
    - Only includes people who are on each register (is_on_register = TRUE)


    **Condition Coverage:**
    - All major QOF registers (AF, Asthma, Cancer, CHD, CKD, COPD, etc.)
    - Includes both adult and paediatric registers
    - Standardised condition codes for reporting

    **Usage:**
    - Multi-morbidity analysis
    - Population health reporting
    - Cross-condition prevalence studies
    - QOF achievement reporting
    '
  columns:
  - name: person_id
    description: Unique person identifier
    tests:
    - not_null
  - name: condition_code
    description: Standardised condition code (AF, AST, CA, CHD, CKD, COPD, DEM, DEP, DM, EPIL, etc.)
    tests:
    - not_null
  - name: condition_name
    description: Full condition name for reporting
    tests:
    - not_null
  - name: is_on_register
    description: Boolean flag - always TRUE for this table (filtered to registered patients only)
    tests:
    - not_null
    - accepted_values:
        values:
        - true
  - name: earliest_diagnosis_date
    description: Earliest diagnosis date for this condition
    tests:
    - not_null
  - name: latest_diagnosis_date
    description: Latest diagnosis date for this condition
    tests:
    - not_null
