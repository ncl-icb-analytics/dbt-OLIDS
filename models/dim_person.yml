version: 2

models:
  - name: dim_person
    description: >
      Person dimension with one row per person_id, retaining a canonical patient_id (minimum per person) and sk_patient_id for simplified joins.
    columns:
      - name: person_id
        description: Unique identifier for the person
        tests:
          - not_null
          - unique
      - name: patient_id
        description: Canonical patient identifier for the person (minimum patient_id per person)
        tests:
          - not_null
      - name: sk_patient_id
        description: Canonical surrogate key for the patient
        tests:
          - not_null
      - name: lds_id
        description: LDS identifier for the person
      - name: lds_business_key
        description: Business key for the LDS record
      - name: lds_dataset_id
        description: Dataset identifier for the LDS record
      - name: primary_patient_id
        description: Primary patient identifier for the person
      - name: lds_start_date_time
        description: Start datetime for the LDS record
      - name: lds_end_date_time
        description: End datetime for the LDS record 