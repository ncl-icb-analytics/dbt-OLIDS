version: 2
models:
- name: int_cancer_diagnoses_all
  tests:
  - test_cluster_ids_exist:
      cluster_ids: CANRES_COD, CAN_COD
  description: "All cancer diagnoses from clinical records.\nUses QOF cluster ID CAN_COD for cancer diagnosis codes (excluding\
    \ non-melanotic skin cancers).\n\nClinical Purpose:\n- Cancer register inclusion for QOF quality measures\n- Cancer care\
    \ pathway tracking\n- Survivorship care planning\n\nQOF Context:\nCancer register follows simple diagnosis-only pattern\
    \ with date restriction - any cancer \ndiagnosis on/after April 1, 2003 qualifies for register inclusion. No resolution\
    \ codes.\nThis supports cancer care quality measures and survivorship monitoring.\n\nKey Clinical Notes:\n- Excludes non-melanotic\
    \ skin cancers as per QOF guidelines\n- Register eligibility requires diagnosis on/after 1 April 2003\n- Cancer is considered\
    \ a permanent condition (no resolution codes)\n- Important for survivorship care and follow-up monitoring\n\nIncludes\
    \ ALL persons (active, inactive, deceased) following intermediate layer principles.\nUse this model as input for cancer\
    \ register.\n"
  columns:
  - name: person_id
    description: Unique person identifier
    tests:
    - not_null
    - relationships:
        to: ref('dim_person')
        field: person_id
