version: 2
models:
- name: int_stroke_tia_diagnoses_all
  tests:
  - cluster_ids_exist:
      cluster_ids: STIARES_COD, STIA_COD
  description: "All stroke and transient ischaemic attack (TIA) diagnoses from clinical records.\nUses QOF cluster ID STIA_COD\
    \ for stroke and TIA diagnosis codes.\n\nClinical Purpose:\n- Stroke/TIA register inclusion for QOF quality measures\n\
    - Stroke secondary prevention monitoring\n- Cardiovascular risk management post-stroke\n\nQOF Context:\nStroke/TIA register\
    \ follows simple diagnosis-only pattern - any stroke or TIA diagnosis \nqualifies for register inclusion. No resolution\
    \ codes or complex criteria.\nThis is a lifelong condition register for stroke secondary prevention.\n\nKey Clinical Notes:\n\
    - Stroke/TIA are considered permanent conditions (no resolution codes)\n- Register inclusion based purely on presence\
    \ of diagnostic codes\n- Critical for secondary prevention and anticoagulation decisions\n- No age restrictions for stroke/TIA\
    \ register\n\nIncludes ALL persons (active, inactive, deceased) following intermediate layer principles.\nUse this model\
    \ as input for stroke/TIA register.\n"
  columns:
  - name: person_id
    description: Unique person identifier
    tests:
    - not_null
    - relationships:
        to: ref('dim_person')
        field: person_id
