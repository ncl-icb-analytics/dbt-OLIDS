version: 2
models:
- name: int_familial_hypercholesterolaemia_diagnoses_all
  tests:
  - cluster_ids_exist:
      cluster_ids: FHYP_COD
  description: 'Intermediate: Familial Hypercholesterolaemia Diagnoses All - Complete history of all FH diagnosis observations from clinical records.


    Clinical Purpose:

    • QOF FH register data collection and monitoring

    • Genetic cardiovascular risk assessment for familial hypercholesterolaemia

    • Family screening pathway identification and cascade testing

    • Lipid management and statin therapy decision support


    Data Granularity:

    • One row per FH diagnosis observation

    • Includes all diagnosis dates for complete clinical history

    • Uses FHYP_COD cluster for QOF-compliant diagnosis identification


    Key Features:

    • Genetic condition tracking with no resolution codes

    • Age restrictions (typically ≥20 years for QOF)

    • Essential for family screening programmes

    • Supports intensive cholesterol management protocols'

  columns:
  - name: person_id
    description: Unique person identifier

    tests:
    - not_null
    - relationships:
        to: ref('dim_person')
        field: person_id
