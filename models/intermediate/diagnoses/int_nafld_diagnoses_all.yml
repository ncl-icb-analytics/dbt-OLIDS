version: 2
models:
- name: int_nafld_diagnoses_all
  description: "Intermediate model collecting all Non-Alcoholic Fatty Liver Disease (NAFLD) diagnosis observations.\n\n**Important\
    \ Note**: This model currently uses hardcoded SNOMED concept codes as no \nNAFLD cluster is available in the codesets\
    \ mapping. This should be updated to use \na proper cluster ID (e.g., 'NAFLD_COD') once available.\n\n**Hardcoded SNOMED\
    \ Codes Used:**\n- 197315008: Non-alcoholic fatty liver disease\n- 1197739005: NAFLD related code\n- 1231824009: NAFLD\
    \ related code  \n- 442685003: NAFLD related code\n- 722866000: NAFLD related code\n- 503681000000108: NAFLD related code\n\
    \n**Clinical Context:**\nNAFLD is a common liver condition associated with metabolic syndrome, diabetes, and obesity.\n\
    Important for liver health monitoring and cardiovascular risk assessment.\n\n**Data Collection Pattern:**\n- One row per\
    \ NAFLD diagnosis observation\n- All observations flagged as NAFLD diagnoses (is_nafld_diagnosis = TRUE)\n- No resolved\
    \ or exclusion codes (none available for NAFLD)\n- Simplified pattern for incremental refresh efficiency\n"
  columns:
  - name: person_id
    description: Unique person identifier
    tests:
    - not_null
  - name: observation_id
    description: Unique observation identifier
    tests:
    - not_null
    - unique
  - name: clinical_effective_date
    description: Date when the NAFLD diagnosis was clinically effective
    tests:
    - not_null
    - test_no_future_dates
  - name: concept_code
    description: SNOMED concept code for the NAFLD diagnosis
    tests:
    - not_null
    - accepted_values:
        values:
        - '197315008'
        - '1197739005'
        - '1231824009'
        - '442685003'
        - '722866000'
        - '503681000000108'
  - name: concept_display
    description: Human-readable description of the NAFLD diagnosis concept
    tests:
    - not_null
  - name: source_cluster_id
    description: Source cluster identifier (currently hardcoded as 'HARDCODED_NAFLD')
    tests:
    - not_null
    - accepted_values:
        values:
        - HARDCODED_NAFLD
