version: 2

models:
  - name: int_ltc_lcs_cyp_asthma_medications
    description: "CYP Asthma medications for LTC/LCS case finding including asthma medications, prednisolone, and montelukast"
    tests:
      - cluster_ids_exist:
          cluster_ids: 'ASTHMA_MEDICATIONS,ASTHMA_PREDNISOLONE,MONTELUKAST_MEDICATIONS'
    columns:
      - name: person_id
        description: "Unique identifier for the person"
        tests:
          - not_null
      - name: clinical_effective_date
        description: "Date when the medication was prescribed"
        # tests:
        #   - not_null  # TODO: Column missing from model, test disabled
      - name: cluster_id
        description: "Cluster identifier for the type of asthma medication"
        tests:
          - not_null
          - accepted_values:
              values: ['ASTHMA_MEDICATIONS', 'ASTHMA_PREDNISOLONE', 'MONTELUKAST_MEDICATIONS']
      - name: mapped_concept_code
        description: "Mapped concept code for the medication"
        tests:
          - not_null
      - name: mapped_concept_display
        description: "Mapped concept display for the medication"
        tests:
          - not_null
      - name: source
        description: "Source system for the medication order"
        # tests:
        #   - not_null  # TODO: Column missing from model, test disabled
        #   - accepted_values:
        #       values: ['LTC_LCS']
