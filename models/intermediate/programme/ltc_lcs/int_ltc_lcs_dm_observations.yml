version: 2
models:
- name: int_ltc_lcs_dm_observations
  description: 'Intermediate: LTC LCS DM Observations - Collects all diabetes-relevant observations for Long Term Conditions case finding measures.


    Clinical Purpose:

    • Gathers comprehensive diabetes-related clinical observation data for case finding algorithms

    • Supports identification of patients with undiagnosed diabetes through laboratory and clinical observations

    • Enables observation-based risk stratification using HbA1c measurements and diabetes risk scores

    • Provides foundation data for diabetes case finding indicators including gestational diabetes risk


    Data Granularity:

    • One row per clinical observation for diabetes-relevant observations

    • Covers HbA1c levels, QDiabetes risk scores, QRISK2 scores, BMI measurements

    • Includes gestational diabetes history and pregnancy risk observations

    • Sourced from LTC_LCS programme observation clusters


    Key Features:


    • Cluster IDs: HBA1C_LEVEL, QDIABETES_RISK, QRISK2_10YEAR, HISTORY_GESTATIONAL_DIABETES, GESTATIONAL_DIABETES_PREGNANCY_RISK, BMI_MEASUREMENT

    • Supports diabetes case finding measures using laboratory and risk assessment data

    • Comprehensive diabetes risk factor and diagnostic observation analysis

    • Integration with LTC_LCS programme clinical observation tracking systems'

  columns:
  - name: observation_id
    description: Unique identifier for the observation

    tests:
    - not_null
  - name: person_id
    description: Unique identifier for the person

    tests:
    - not_null
  - name: clinical_effective_date
    description: Date when the diabetes-related observation was recorded
  - name: result_value
    description: Numeric result value for measurements (HbA1c, BMI, risk scores)
  - name: result_value_unit_concept_id
    description: Unit concept ID for the result value
  - name: result_unit_display
    description: Human-readable unit display for the result
  - name: result_text
    description: Text result for non-numeric observations
  - name: mapped_concept_code
    description: Mapped concept code for the diabetes observation
  - name: mapped_concept_display
    description: Human-readable description of the diabetes observation
  - name: cluster_id
    description: Cluster identifier for the diabetes observation type

    tests:
    - accepted_values:

        values:
        - HBA1C_LEVEL
        - QDIABETES_RISK
        - QRISK2_10YEAR
        - HISTORY_GESTATIONAL_DIABETES
        - GESTATIONAL_DIABETES_PREGNANCY_RISK
        - BMI_MEASUREMENT
  - name: cluster_description
    description: Description of the diabetes observation cluster

  tests:
  - cluster_ids_exist:
      cluster_ids: HBA1C_LEVEL,QDIABETES_RISK,QRISK2_10YEAR,HISTORY_GESTATIONAL_DIABETES,GESTATIONAL_DIABETES_PREGNANCY_RISK,BMI_MEASUREMENT
