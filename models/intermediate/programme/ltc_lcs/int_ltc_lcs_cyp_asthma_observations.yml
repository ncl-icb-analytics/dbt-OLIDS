version: 2

models:
  - name: int_ltc_lcs_cyp_asthma_observations
    description: "CYP Asthma observations for LTC/LCS case finding including diagnoses, symptoms, and related conditions (non-medication observations)"
    # tests:
    #   - cluster_ids_exist:
    #       cluster_ids: 'SUSPECTED_ASTHMA,VIRAL_WHEEZE,ASTHMA_DIAGNOSIS,ASTHMA_RESOLVED'
    columns:
      - name: person_id
        description: "Unique identifier for the person"
        tests:
          - not_null
      - name: clinical_effective_date
        description: "Date when the observation was clinically effective"
        # tests:
        #   - not_null  # Disabled for dummy data - expect some nulls
      - name: cluster_id
        description: "Cluster identifier for the type of asthma observation"
        tests:
          - not_null
          - accepted_values:
              values: ['SUSPECTED_ASTHMA', 'VIRAL_WHEEZE', 'ASTHMA_DIAGNOSIS', 'ASTHMA_RESOLVED']
      - name: mapped_concept_code
        description: "Mapped concept code for the observation"
        tests:
          - not_null
      - name: mapped_concept_display
        description: "Mapped concept display for the observation"
        tests:
          - not_null
      - name: source
        description: "Source system for the observation"
        # tests:
        #   - not_null  # TODO: Column missing from model, test disabled
        #   - accepted_values:
        #       values: ['LTC_LCS'] 