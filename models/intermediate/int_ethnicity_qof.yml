version: 2

models:
  - name: int_ethnicity_qof
    description: |
      QOF-specific ethnicity categorisation.
      Implements QOF business rules for ethnicity reporting with standardised categories.
      One row per person with latest/preferred ethnicity assignment.
    columns:
      - name: person_id
        description: "Unique person identifier"
        tests:
          - not_null
          - unique
      - name: clinical_effective_date
        description: "Date of the ethnicity record used"
        tests:
          - not_null
      - name: qof_ethnicity_category
        description: "QOF standardised ethnicity category"
        tests:
          - not_null
          - accepted_values:
              values: ['White', 'Mixed', 'Asian or Asian British', 'Black or Black British', 'Chinese or Other Ethnic Groups', 'Not Stated', 'Unknown']
      - name: ethnicity_code
        description: "Original ethnicity concept code"
        tests:
          - not_null
      - name: ethnicity_description
        description: "Original ethnicity description"
        tests:
          - not_null 