version: 2
models:
- name: int_allergy_medications_all
  tests:
  - bnf_codes_exist:
      bnf_codes: '0304'
  description: 'Intermediate: Allergy Medications - All recorded antihistamine and allergy treatment prescriptions.


Clinical Purpose:

• Supports allergic condition monitoring (rhinitis, urticaria, eczema)

• Enables allergy management pathway tracking and medication review processes

• Facilitates prescribing pattern analysis by sedation profile and administration route


Data Granularity:

• One row per medication order

• Includes all patients with allergy medication prescriptions

• Historical data spanning entire medication history


Key Features:

• Antihistamine type classification with sedation profile (sedating vs non-sedating)

• Route of administration categorisation (oral, topical, injection)

• Clinical indication mapping for specific allergic conditions
• Over-the-counter availability and safety warning flags'

  columns:
  - name: person_id
    description: Unique person identifier across the HEI system

    tests:
    - not_null
  - name: medication_order_id
    description: Unique identifier for the medication order record

    tests:
    - not_null
    - unique
  - name: order_date
    description: Date the allergy medication was ordered

    tests:
    - not_null
  - name: antihistamine_type
    description: Specific antihistamine medication type

    tests:
    - not_null
    - accepted_values:

        values:
        - CETIRIZINE
        - LORATADINE
        - FEXOFENADINE
        - CHLORPHENAMINE
        - PROMETHAZINE
        - HYDROXYZINE
        - DESLORATADINE
        - LEVOCETIRIZINE
        - BILASTINE
        - ACRIVASTINE
        - OTHER_ANTIHISTAMINE
  - name: sedation_profile
    description: Sedation characteristics of the antihistamine

    tests:
    - not_null
    - accepted_values:

        values:
        - NON_SEDATING
        - SEDATING
        - UNKNOWN_SEDATION
  - name: route_of_administration
    description: Route of administration for the medication

    tests:
    - not_null
    - accepted_values:

        values:
        - ORAL
        - ORAL_LIQUID
        - INJECTION
        - TOPICAL
        - UNKNOWN_ROUTE
  - name: clinical_indication
    description: Primary clinical indication for allergy treatment

    tests:
    - not_null
    - accepted_values:

        values:
        - ALLERGIC_RHINITIS
        - URTICARIA
        - ECZEMA_DERMATITIS
        - GENERAL_ALLERGY
  - name: is_paediatric_formulation
    description: Boolean flag indicating paediatric-specific formulation

    tests:
    - not_null
    - accepted_values:

        values:
        - true
        - false
  - name: is_otc_available
    description: Boolean flag indicating over-the-counter availability

    tests:
    - not_null
    - accepted_values:

        values:
        - true
        - false
  - name: requires_drowsiness_warning
    description: Boolean flag indicating drowsiness warning requirement

    tests:
    - not_null
    - accepted_values:

        values:
        - true
        - false
  - name: is_recent_3m
    description: Boolean flag indicating order within last 3 months

    tests:
    - not_null
    - accepted_values:

        values:
        - true
        - false
  - name: is_recent_6m
    description: Boolean flag indicating order within last 6 months

    tests:
    - not_null
    - accepted_values:

        values:
        - true
        - false
  - name: is_recent_12m
    description: Boolean flag indicating order within last 12 months

    tests:
    - not_null
    - accepted_values:

        values:
        - true
        - false
