version: 2
models:
- name: int_hba1c_all
  tests:
  - test_cluster_ids_exist:
      cluster_ids: DCCTHBA1C_COD, IFCCHBAM_COD
  description: 'All HbA1c measurements from observations.

    Handles both IFCC (mmol/mol) and DCCT (%) measurement types with clinical validation.

    Includes ALL persons following intermediate layer principles.

    '
  columns:
  - name: person_id
    description: Unique person identifier
    tests:
    - not_null
  - name: observation_id
    description: Unique observation identifier
    tests:
    - not_null
  - name: clinical_effective_date
    description: Date of the HbA1c measurement
    tests:
    - not_null
  - name: is_valid_hba1c
    description: Flag indicating if HbA1c is within valid range
    tests:
    - not_null
    - accepted_values:
        values:
        - true
        - false
