version: 2
models:
  - name: int_dxa_scans_all
    description: 'Intermediate: DXA Scan Observations - All recorded DXA scan procedures and T-score measurements.


      Clinical Purpose:

      • Tracks DXA scans for osteoporosis diagnosis and bone health monitoring

      • Supports osteoporosis register eligibility and fracture risk assessment

      • Enables bone density monitoring and treatment response evaluation


      Data Granularity:

      • One row per DXA observation (procedures and T-score measurements)

      • Includes all patients regardless of status (active/inactive/deceased)

      • Uses DXA_COD (procedures) and DXA2_COD (T-scores) clusters


      Key Features:

      • DXA scan procedure identification and T-score measurement validation

      • Clinical T-score interpretation (osteoporosis, osteopenia, normal)

      • QOF osteoporosis confirmation flags (T-score ≤ -2.5)

      • Comprehensive bone health assessment for clinical decision support'
    tests:
      - cluster_ids_exist:
          arguments:
            cluster_ids: DXA2_COD, DXA_COD
