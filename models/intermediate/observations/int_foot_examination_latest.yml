version: 2

models:
  - name: int_foot_examination_latest
    description: |
      Latest foot examination record per person.
      Provides most recent foot check status including completion and risk assessment.
    columns:
      - name: person_id
        description: "Unique person identifier"
        tests:
          - not_null
          - unique
      - name: clinical_effective_date
        description: "Date of the latest foot examination"
        tests:
          - not_null
          - test_no_future_dates
      - name: is_unsuitable
        description: "Flag indicating foot check deemed unsuitable"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: is_declined
        description: "Flag indicating patient declined foot check"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: left_foot_checked
        description: "Flag indicating left foot was checked"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: right_foot_checked
        description: "Flag indicating right foot was checked"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: both_feet_checked
        description: "Flag indicating both feet were checked"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: left_foot_absent
        description: "Flag indicating congenital absence of left foot"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: right_foot_absent
        description: "Flag indicating congenital absence of right foot"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: left_foot_amputated
        description: "Flag indicating left foot amputation"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: right_foot_amputated
        description: "Flag indicating right foot amputation"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: examination_status
        description: "Overall status of foot examination"
        tests:
          - not_null
          - accepted_values:
              values: ['Unsuitable', 'Declined', 'Complete - Both Feet', 'Complete - Left Only (Right Missing)', 'Complete - Right Only (Left Missing)', 'Partial - Left Only', 'Partial - Right Only', 'Not Done'] 