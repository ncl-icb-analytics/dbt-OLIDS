version: 2
models:
  - name: int_unable_spirometry_all
    description: 'Intermediate: Unable Spirometry Observations - All records where spirometry testing was unsuitable or contraindicated.


      Clinical Purpose:

      • Tracks spirometry contraindications for COPD register confirmation requirements

      • Supports alternative pathway for COPD register inclusion when spirometry cannot be performed

      • Enables documentation of clinical assessment limitations and patient factors


      Data Granularity:

      • One row per unable spirometry observation

      • Includes all patients regardless of status (active/inactive/deceased)

      • Uses SPIRPU_COD cluster for spirometry unsuitability identification


      Key Features:

      • Comprehensive documentation of spirometry contraindications

      • Alternative evidence pathway for COPD register eligibility

      • Clinical assessment limitation tracking for quality assurance

      • Essential for COPD register spirometry validation processes'
    tests:
      - cluster_ids_exist:
          arguments:
            cluster_ids: SPIRPU_COD
